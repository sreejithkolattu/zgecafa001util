sap.ui.define(["jquery.sap.global","sap/ui/core/Control"],function(e,t){"use strict";return{handleRoleBasedPersona:function(t){var r=t;var a="/sap/opu/odata/sap/ZGECAGS010_SRV/";var s=new sap.ui.model.odata.v2.ODataModel(a);s.read("/MultiplePersonaSet",{success:function(e,t){if(e!==undefined&&e.results!==undefined&&e.results.length>1){r._oDialog=sap.ui.xmlfragment("CLMPRJ_ID","zgecafa001util.zgecafa001util.fragments.PersonaSelectionView",r);r._oDialog.setEscapeHandler(function(){return});r._oDialog.setModel(new sap.ui.model.json.JSONModel(e));r._oDialog.open();sap.ui.core.Fragment.byId("CLMPRJ_ID","btnOk").attachPress(n,r);sap.ui.core.Fragment.byId("CLMPRJ_ID","btnCancel").attachPress(o);var a=sap.ui.core.Fragment.byId("CLMPRJ_ID","idPersonaListItem").getItems()[0];sap.ui.core.Fragment.byId("CLMPRJ_ID","idPersonaListItem").setSelectedItem(a,true)}else{if(r.onPersonaSelection!==undefined)r.onPersonaSelection();else sap.m.MessageBox.show("Please implement onPersonaSelection function")}},error:function(t){try{var n=e.parseJSON(t.responseText).error.innererror.errordetails[0].message}catch(e){n="An unexpected error has occurred. Contact your administrator."}r.onPersonaError(n,t)}})}};function r(e){var t=e.getSource().getParent();var r=e.getSource().getSelectedItem().getBindingContext().getObject();t.getParent().setModel(r,"PersonaModel")}function n(e,t){var r=t;var n=e.getSource().getParent();var o="/sap/opu/odata/sap/ZGECAGS010_SRV/";var a=new sap.ui.model.odata.v2.ODataModel(o);var s=sap.ui.core.Fragment.byId("CLMPRJ_ID","idPersonaListItem").getSelectedItem().getBindingContext().getObject();a.create("/MultiplePersonaSet",s,{success:function(e,n){t.onPersonaSelection(s);r.onPersonaSelection(s)},error:function(e){sap.m.MessageBox.error("Error in retrieving data");return}});n.close();n.destroy();n=undefined}function o(e){var t=e.getSource().getParent();t.close();t.destroy();t=undefined;window.history.go(-1)}},true);